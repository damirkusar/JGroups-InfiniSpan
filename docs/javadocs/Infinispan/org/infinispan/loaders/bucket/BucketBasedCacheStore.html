<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_15) on Wed Oct 28 18:35:32 GMT 2009 -->
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<TITLE>
BucketBasedCacheStore (Infinispan Distribution 4.0.0.CR1 API)
</TITLE>

<META NAME="date" CONTENT="2009-10-28">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="BucketBasedCacheStore (Infinispan Distribution 4.0.0.CR1 API)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/BucketBasedCacheStore.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/infinispan/loaders/bucket/Bucket.Externalizer.html" title="class in org.infinispan.loaders.bucket"><B>PREV CLASS</B></A>&nbsp;
&nbsp;NEXT CLASS</FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?org/infinispan/loaders/bucket/BucketBasedCacheStore.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="BucketBasedCacheStore.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#fields_inherited_from_class_org.infinispan.loaders.AbstractCacheStore">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.infinispan.loaders.bucket</FONT>
<BR>
Class BucketBasedCacheStore</H2>
<PRE>
<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</A>
  <IMG SRC="../../../../resources/inherit.gif" ALT="extended by "><A HREF="../../../../org/infinispan/loaders/AbstractCacheLoader.html" title="class in org.infinispan.loaders">org.infinispan.loaders.AbstractCacheLoader</A>
      <IMG SRC="../../../../resources/inherit.gif" ALT="extended by "><A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html" title="class in org.infinispan.loaders">org.infinispan.loaders.AbstractCacheStore</A>
          <IMG SRC="../../../../resources/inherit.gif" ALT="extended by "><A HREF="../../../../org/infinispan/loaders/LockSupportCacheStore.html" title="class in org.infinispan.loaders">org.infinispan.loaders.LockSupportCacheStore</A>
              <IMG SRC="../../../../resources/inherit.gif" ALT="extended by "><B>org.infinispan.loaders.bucket.BucketBasedCacheStore</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD><A HREF="../../../../org/infinispan/loaders/CacheLoader.html" title="interface in org.infinispan.loaders">CacheLoader</A>, <A HREF="../../../../org/infinispan/loaders/CacheStore.html" title="interface in org.infinispan.loaders">CacheStore</A></DD>
</DL>
<DL>
<DT><B>Direct Known Subclasses:</B> <DD><A HREF="../../../../org/infinispan/loaders/file/FileCacheStore.html" title="class in org.infinispan.loaders.file">FileCacheStore</A>, <A HREF="../../../../org/infinispan/loaders/jdbc/binary/JdbcBinaryCacheStore.html" title="class in org.infinispan.loaders.jdbc.binary">JdbcBinaryCacheStore</A>, <A HREF="../../../../org/infinispan/loaders/s3/S3CacheStore.html" title="class in org.infinispan.loaders.s3">S3CacheStore</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public abstract class <B>BucketBasedCacheStore</B><DT>extends <A HREF="../../../../org/infinispan/loaders/LockSupportCacheStore.html" title="class in org.infinispan.loaders">LockSupportCacheStore</A></DL>
</PRE>

<P>
Base class for cache store that want to use the 'buckets approach' for storing data.
 <p/>
 A hashing algorithm is used to map keys to buckets, and a bucket consists of a collection of key/value pairs.
 <p/>
 This approach, while adding an overhead of having to search buckets for keys, means that we can use any serializable
 object we like as keys and not just Strings or objects that translate to something meaningful for a store(e.g. file
 system).
 <p/>
<P>

<P>
<DL>
<DT><B>Since:</B></DT>
  <DD>4.0</DD>
<DT><B>Author:</B></DT>
  <DD>Mircea.Markus@jboss.com</DD>
</DL>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
</TABLE>
&nbsp;<A NAME="fields_inherited_from_class_org.infinispan.loaders.AbstractCacheStore"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Fields inherited from class org.infinispan.loaders.<A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html" title="class in org.infinispan.loaders">AbstractCacheStore</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html#cache">cache</A>, <A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html#marshaller">marshaller</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../org/infinispan/loaders/bucket/BucketBasedCacheStore.html#BucketBasedCacheStore()">BucketBasedCacheStore</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/infinispan/loaders/bucket/BucketBasedCacheStore.html#getLockFromKey(java.lang.Object)">getLockFromKey</A></B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A>&nbsp;key)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;For <A HREF="../../../../org/infinispan/loaders/bucket/BucketBasedCacheStore.html" title="class in org.infinispan.loaders.bucket"><CODE>BucketBasedCacheStore</CODE></A>s the lock should be acquired at bucket level.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected abstract &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/infinispan/loaders/bucket/BucketBasedCacheStore.html#insertBucket(org.infinispan.loaders.bucket.Bucket)">insertBucket</A></B>(<A HREF="../../../../org/infinispan/loaders/bucket/Bucket.html" title="class in org.infinispan.loaders.bucket">Bucket</A>&nbsp;bucket)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected abstract &nbsp;<A HREF="../../../../org/infinispan/loaders/bucket/Bucket.html" title="class in org.infinispan.loaders.bucket">Bucket</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/infinispan/loaders/bucket/BucketBasedCacheStore.html#loadBucket(java.lang.String)">loadBucket</A></B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;keyHashCode)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Loads the bucket from the store, base on the hashcode.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../../org/infinispan/container/entries/InternalCacheEntry.html" title="interface in org.infinispan.container.entries">InternalCacheEntry</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/infinispan/loaders/bucket/BucketBasedCacheStore.html#loadLockSafe(java.lang.Object, java.lang.String)">loadLockSafe</A></B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A>&nbsp;key,
             <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;lockingKey)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Loads the bucket coresponding to the given key, and lookups the key within it.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/infinispan/loaders/bucket/BucketBasedCacheStore.html#removeLockSafe(java.lang.Object, java.lang.String)">removeLockSafe</A></B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A>&nbsp;key,
               <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;lockingKey)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Lookups a bucket where the given key is stored.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected abstract &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/infinispan/loaders/bucket/BucketBasedCacheStore.html#saveBucket(org.infinispan.loaders.bucket.Bucket)">saveBucket</A></B>(<A HREF="../../../../org/infinispan/loaders/bucket/Bucket.html" title="class in org.infinispan.loaders.bucket">Bucket</A>&nbsp;bucket)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method assumes that the bucket is already persisted in the database.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/infinispan/loaders/bucket/BucketBasedCacheStore.html#storeLockSafe(org.infinispan.container.entries.InternalCacheEntry, java.lang.String)">storeLockSafe</A></B>(<A HREF="../../../../org/infinispan/container/entries/InternalCacheEntry.html" title="interface in org.infinispan.container.entries">InternalCacheEntry</A>&nbsp;ed,
              <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;lockingKey)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tries to find a bucket corresponding to storedEntry's key, and updates it with the storedEntry.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_org.infinispan.loaders.LockSupportCacheStore"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class org.infinispan.loaders.<A HREF="../../../../org/infinispan/loaders/LockSupportCacheStore.html" title="class in org.infinispan.loaders">LockSupportCacheStore</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../../org/infinispan/loaders/LockSupportCacheStore.html#acquireGlobalLock(boolean)">acquireGlobalLock</A>, <A HREF="../../../../org/infinispan/loaders/LockSupportCacheStore.html#clear()">clear</A>, <A HREF="../../../../org/infinispan/loaders/LockSupportCacheStore.html#clearLockSafe()">clearLockSafe</A>, <A HREF="../../../../org/infinispan/loaders/LockSupportCacheStore.html#fromStream(java.io.ObjectInput)">fromStream</A>, <A HREF="../../../../org/infinispan/loaders/LockSupportCacheStore.html#fromStreamLockSafe(java.io.ObjectInput)">fromStreamLockSafe</A>, <A HREF="../../../../org/infinispan/loaders/LockSupportCacheStore.html#getTotalLockCount()">getTotalLockCount</A>, <A HREF="../../../../org/infinispan/loaders/LockSupportCacheStore.html#immediateLockForWriting(java.lang.String)">immediateLockForWriting</A>, <A HREF="../../../../org/infinispan/loaders/LockSupportCacheStore.html#init(org.infinispan.loaders.CacheLoaderConfig, org.infinispan.Cache, org.infinispan.marshall.Marshaller)">init</A>, <A HREF="../../../../org/infinispan/loaders/LockSupportCacheStore.html#load(java.lang.Object)">load</A>, <A HREF="../../../../org/infinispan/loaders/LockSupportCacheStore.html#loadAll()">loadAll</A>, <A HREF="../../../../org/infinispan/loaders/LockSupportCacheStore.html#loadAllLockSafe()">loadAllLockSafe</A>, <A HREF="../../../../org/infinispan/loaders/LockSupportCacheStore.html#lockForReading(java.lang.String)">lockForReading</A>, <A HREF="../../../../org/infinispan/loaders/LockSupportCacheStore.html#lockForWriting(java.lang.String)">lockForWriting</A>, <A HREF="../../../../org/infinispan/loaders/LockSupportCacheStore.html#releaseGlobalLock(boolean)">releaseGlobalLock</A>, <A HREF="../../../../org/infinispan/loaders/LockSupportCacheStore.html#remove(java.lang.Object)">remove</A>, <A HREF="../../../../org/infinispan/loaders/LockSupportCacheStore.html#start()">start</A>, <A HREF="../../../../org/infinispan/loaders/LockSupportCacheStore.html#store(org.infinispan.container.entries.InternalCacheEntry)">store</A>, <A HREF="../../../../org/infinispan/loaders/LockSupportCacheStore.html#toStream(java.io.ObjectOutput)">toStream</A>, <A HREF="../../../../org/infinispan/loaders/LockSupportCacheStore.html#toStreamLockSafe(java.io.ObjectOutput)">toStreamLockSafe</A>, <A HREF="../../../../org/infinispan/loaders/LockSupportCacheStore.html#unlock(java.lang.String)">unlock</A></CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_org.infinispan.loaders.AbstractCacheStore"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class org.infinispan.loaders.<A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html" title="class in org.infinispan.loaders">AbstractCacheStore</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html#applyModifications(java.util.List)">applyModifications</A>, <A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html#commit(org.infinispan.transaction.xa.GlobalTransaction)">commit</A>, <A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html#getCacheStoreConfig()">getCacheStoreConfig</A>, <A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html#getConcurrencyLevel()">getConcurrencyLevel</A>, <A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html#getMarshaller()">getMarshaller</A>, <A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html#prepare(java.util.List, org.infinispan.transaction.xa.GlobalTransaction, boolean)">prepare</A>, <A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html#purgeExpired()">purgeExpired</A>, <A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html#purgeInternal()">purgeInternal</A>, <A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html#removeAll(java.util.Set)">removeAll</A>, <A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html#rollback(org.infinispan.transaction.xa.GlobalTransaction)">rollback</A>, <A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html#safeClose(java.io.InputStream)">safeClose</A>, <A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html#safeClose(java.io.OutputStream)">safeClose</A>, <A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html#stop()">stop</A></CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_org.infinispan.loaders.AbstractCacheLoader"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class org.infinispan.loaders.<A HREF="../../../../org/infinispan/loaders/AbstractCacheLoader.html" title="class in org.infinispan.loaders">AbstractCacheLoader</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../../org/infinispan/loaders/AbstractCacheLoader.html#containsKey(java.lang.Object)">containsKey</A></CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</A></CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_org.infinispan.loaders.CacheLoader"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from interface org.infinispan.loaders.<A HREF="../../../../org/infinispan/loaders/CacheLoader.html" title="interface in org.infinispan.loaders">CacheLoader</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../../org/infinispan/loaders/CacheLoader.html#containsKey(java.lang.Object)">containsKey</A>, <A HREF="../../../../org/infinispan/loaders/CacheLoader.html#getConfigurationClass()">getConfigurationClass</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="BucketBasedCacheStore()"><!-- --></A><H3>
BucketBasedCacheStore</H3>
<PRE>
public <B>BucketBasedCacheStore</B>()</PRE>
<DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="loadLockSafe(java.lang.Object, java.lang.String)"><!-- --></A><H3>
loadLockSafe</H3>
<PRE>
protected <A HREF="../../../../org/infinispan/container/entries/InternalCacheEntry.html" title="interface in org.infinispan.container.entries">InternalCacheEntry</A> <B>loadLockSafe</B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A>&nbsp;key,
                                          <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;lockingKey)
                                   throws <A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></PRE>
<DL>
<DD>Loads the bucket coresponding to the given key, and lookups the key within it. if the bucket is found and the key
 is expired, then it won't be returned.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/infinispan/loaders/LockSupportCacheStore.html#loadLockSafe(java.lang.Object, java.lang.String)">loadLockSafe</A></CODE> in class <CODE><A HREF="../../../../org/infinispan/loaders/LockSupportCacheStore.html" title="class in org.infinispan.loaders">LockSupportCacheStore</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>key</CODE> - the passed in key, from <A HREF="../../../../org/infinispan/loaders/LockSupportCacheStore.html#load(java.lang.Object)"><CODE>LockSupportCacheStore.load(Object)</CODE></A><DD><CODE>lockingKey</CODE> - the hash of the key, as returned by <A HREF="../../../../org/infinispan/loaders/LockSupportCacheStore.html#getLockFromKey(java.lang.Object)"><CODE>LockSupportCacheStore.getLockFromKey(Object)</CODE></A>. This
                   is present here in order to avoid hash recomputation.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="storeLockSafe(org.infinispan.container.entries.InternalCacheEntry, java.lang.String)"><!-- --></A><H3>
storeLockSafe</H3>
<PRE>
protected void <B>storeLockSafe</B>(<A HREF="../../../../org/infinispan/container/entries/InternalCacheEntry.html" title="interface in org.infinispan.container.entries">InternalCacheEntry</A>&nbsp;ed,
                             <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;lockingKey)
                      throws <A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></PRE>
<DL>
<DD>Tries to find a bucket corresponding to storedEntry's key, and updates it with the storedEntry. If no bucket is
 found, a new one is created.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/infinispan/loaders/LockSupportCacheStore.html#storeLockSafe(org.infinispan.container.entries.InternalCacheEntry, java.lang.String)">storeLockSafe</A></CODE> in class <CODE><A HREF="../../../../org/infinispan/loaders/LockSupportCacheStore.html" title="class in org.infinispan.loaders">LockSupportCacheStore</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>lockingKey</CODE> - the hash of the key, as returned by <A HREF="../../../../org/infinispan/loaders/LockSupportCacheStore.html#getLockFromKey(java.lang.Object)"><CODE>LockSupportCacheStore.getLockFromKey(Object)</CODE></A>. This
                   is present here in order to avoid hash recomputation.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="removeLockSafe(java.lang.Object, java.lang.String)"><!-- --></A><H3>
removeLockSafe</H3>
<PRE>
protected boolean <B>removeLockSafe</B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A>&nbsp;key,
                                 <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;lockingKey)
                          throws <A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></PRE>
<DL>
<DD>Lookups a bucket where the given key is stored. Then removes the StoredEntry having with gven key from there (if
 such a bucket exists).
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/infinispan/loaders/LockSupportCacheStore.html#removeLockSafe(java.lang.Object, java.lang.String)">removeLockSafe</A></CODE> in class <CODE><A HREF="../../../../org/infinispan/loaders/LockSupportCacheStore.html" title="class in org.infinispan.loaders">LockSupportCacheStore</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>lockingKey</CODE> - the hash of the key, as returned by <A HREF="../../../../org/infinispan/loaders/LockSupportCacheStore.html#getLockFromKey(java.lang.Object)"><CODE>LockSupportCacheStore.getLockFromKey(Object)</CODE></A>. This
                   is present here in order to avoid hash recomputation.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getLockFromKey(java.lang.Object)"><!-- --></A><H3>
getLockFromKey</H3>
<PRE>
protected <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A> <B>getLockFromKey</B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A>&nbsp;key)</PRE>
<DL>
<DD>For <A HREF="../../../../org/infinispan/loaders/bucket/BucketBasedCacheStore.html" title="class in org.infinispan.loaders.bucket"><CODE>BucketBasedCacheStore</CODE></A>s the lock should be acquired at bucket level. So we're locking based on the
 hashCode of the key, as all keys having same hascode will be mapped to same bucket.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/infinispan/loaders/LockSupportCacheStore.html#getLockFromKey(java.lang.Object)">getLockFromKey</A></CODE> in class <CODE><A HREF="../../../../org/infinispan/loaders/LockSupportCacheStore.html" title="class in org.infinispan.loaders">LockSupportCacheStore</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="insertBucket(org.infinispan.loaders.bucket.Bucket)"><!-- --></A><H3>
insertBucket</H3>
<PRE>
protected abstract void <B>insertBucket</B>(<A HREF="../../../../org/infinispan/loaders/bucket/Bucket.html" title="class in org.infinispan.loaders.bucket">Bucket</A>&nbsp;bucket)
                              throws <A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></PRE>
<DL>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="saveBucket(org.infinispan.loaders.bucket.Bucket)"><!-- --></A><H3>
saveBucket</H3>
<PRE>
protected abstract void <B>saveBucket</B>(<A HREF="../../../../org/infinispan/loaders/bucket/Bucket.html" title="class in org.infinispan.loaders.bucket">Bucket</A>&nbsp;bucket)
                            throws <A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></PRE>
<DL>
<DD>This method assumes that the bucket is already persisted in the database.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></CODE> - if the bucket is not already present, or something happens while persisting.</DL>
</DD>
</DL>
<HR>

<A NAME="loadBucket(java.lang.String)"><!-- --></A><H3>
loadBucket</H3>
<PRE>
protected abstract <A HREF="../../../../org/infinispan/loaders/bucket/Bucket.html" title="class in org.infinispan.loaders.bucket">Bucket</A> <B>loadBucket</B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;keyHashCode)
                              throws <A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></PRE>
<DL>
<DD>Loads the bucket from the store, base on the hashcode.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></CODE></DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/BucketBasedCacheStore.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
Google Analytics <script type='text/javascript'> var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www."); document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E")); </script> <script type='text/javascript'> try { var pageTracker = _gat._getTracker("UA-8601422-4"); pageTracker._trackPageview(); } catch(err) {}</script></EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/infinispan/loaders/bucket/Bucket.Externalizer.html" title="class in org.infinispan.loaders.bucket"><B>PREV CLASS</B></A>&nbsp;
&nbsp;NEXT CLASS</FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?org/infinispan/loaders/bucket/BucketBasedCacheStore.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="BucketBasedCacheStore.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#fields_inherited_from_class_org.infinispan.loaders.AbstractCacheStore">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright &#169; 2009 <a href="http://www.jboss.org">JBoss, a division of Red Hat</a>. All Rights Reserved.
</BODY>
</HTML>
